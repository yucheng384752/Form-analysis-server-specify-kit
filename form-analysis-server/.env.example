# Database Configuration
POSTGRES_USER=app
POSTGRES_PASSWORD=app_secure_password_2024
POSTGRES_DB=form_analysis_db
POSTGRES_PORT=18001

# Database URL for application
# 本地開發使用 asyncpg（建議用於 FastAPI 非同步應用）
# DATABASE_URL=postgresql+asyncpg://app:app_secure_password_2024@localhost:18001/form_analysis_db
# Docker 環境使用 psycopg（同步驅動）
DATABASE_URL=postgresql+psycopg://app:app_secure_password_2024@db:5432/form_analysis_db

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
MAX_UPLOAD_SIZE_MB=10
UPLOAD_TEMP_DIR=./uploads

# CORS Settings (comma-separated origins)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
DEBUG=false
RELOAD=true

# Frontend Configuration
FRONTEND_PORT=5173
VITE_API_URL=http://localhost:8000
VITE_MAX_FILE_SIZE=10485760

# pgAdmin Configuration (optional)
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin_change_in_production
PGADMIN_PORT=5050

# Development Settings
# Set to true for development, false for production
DEV_MODE=true

# Security Settings
# 生產環境請使用安全的隨機字串（至少 32 字元）
# 可使用 secrets 管理器儲存生產環境的 SECRET_KEY
SECRET_KEY=change-this-in-production-must-be-32-chars-minimum
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------
# Lightweight Auth (API Key)
# -----------------------------
# NOTE: docker-compose.yml 會在「部署層」預設啟用 AUTH_MODE=api_key（不改後端程式預設值）。
# 你可以在這裡覆寫，或在執行 docker compose 前用環境變數覆寫。
# AUTH_MODE=off|api_key
#
# Profile (docs 放行):
# - 適用：把後端曝露到公網，但仍希望 /docs 可直接查看
# - 保護所有路徑：AUTH_PROTECT_PREFIXES=/
# - 放行健康檢查與文件：AUTH_EXEMPT_PATHS=/healthz,/docs,/redoc,/openapi.json
#
# Profile (docs 也受保護):
# - 適用：公網上線，不希望 Swagger/OpenAPI 被未授權的人看到
# - 保護所有路徑：AUTH_PROTECT_PREFIXES=/
# - 僅放行健康檢查：AUTH_EXEMPT_PATHS=/healthz

#AUTH_MODE=api_key
#AUTH_API_KEY_HEADER=X-API-Key
#AUTH_PROTECT_PREFIXES=/
#AUTH_EXEMPT_PATHS=/healthz,/docs,/redoc,/openapi.json

# Admin bootstrap (optional)
# 用途：保護像 POST /api/tenants 這類「建立 tenant」的特權操作（需要 admin key）。
# - ADMIN_API_KEYS：逗號分隔的 raw key（請用強隨機字串，並在生產環境以 secrets 管理）
# - ADMIN_API_KEY_HEADER：header 名稱（預設 X-Admin-API-Key）
#ADMIN_API_KEYS=change-me
#ADMIN_API_KEY_HEADER=X-Admin-API-Key

# -----------------------------
# Audit Events (DB, minimal)
# -----------------------------
# Enable this when you want long-term, queryable audit trails in DB.
# - Best-effort: DB write failures won't break API responses.
# - Never stores raw API keys or request bodies.
# - Default methods are write operations only.

#AUDIT_EVENTS_ENABLED=false
#AUDIT_EVENTS_METHODS=POST,PUT,PATCH,DELETE

# File Upload Settings
ALLOWED_EXTENSIONS=csv,xlsx
MAX_CONCURRENT_UPLOADS=10

# Database Connection Pool Settings
DATABASE_ECHO=false
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Performance Settings
REQUEST_TIMEOUT=30
HEALTH_CHECK_INTERVAL=30

# Application Environment
ENVIRONMENT=production

# Example environment-specific files:
# .env.local       - Local development overrides  
# .env.production  - Production secure values
# .env.staging     - Staging environment values

# Local development DATABASE_URL override:
# DATABASE_URL=postgresql+psycopg://app:app_secure_password_change_in_production@localhost:5432/form_analysis_db