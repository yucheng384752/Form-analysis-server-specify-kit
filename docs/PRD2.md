# Form Analysis Server

## Introduction
工廠使用這個系統管理輸入的csv檔案，並進行資料的即時搜尋

## Objectives 
### 上傳頁面
針對每個動作都顯示toast提示
- 區塊一
  1. 可以使用拖曳上傳與選擇檔案上傳 -> 支援多檔案上傳
  2. 僅支援csv上傳，檔案大小限制10MB
  3. 具有hover提示功能，在上傳區域點擊**開啟檔案選擇**
- 區塊二
  1. 可以看到上傳進度
  2. 顯示**確認驗證**按鈕
  3. 在驗證時顯示進度條(區塊3.1)
  4. 在上傳完成時，按下**確認**進行必要表格驗證
  5. 在驗證時，要鎖定驗證按鈕
  6. 在顯示檔案的區塊要有**取消(X)**按鈕可以刪除上傳檔案
- 區塊三
  1. 顯示csv內容編輯(固定標題欄、右側滑桿、下方滑桿)
  2. 儲存格會**根據最長的欄位**動態同步所有表格的寬度
  3. 提供 **儲存修改**、**確認匯入** 按鈕
  4. 根據上傳的資料提供提示訊息: 共 X 行資料，Y 個欄位；提示：點擊任意儲存格即可直接編輯內容
  5. 在儲存修改前，無法按下確認匯入按鈕
  6. 按下**確認匯入**按鈕時，顯示彈窗:  是否確認上傳；此操作將會把 CSV 檔案匯入資料庫中，請確認是否要繼續？
  7. 匯入資料庫時顯示進度條
  8. 可以先搜尋資料庫是否有相同lot_no以及Phase的資料，有的話要提示User
  9. 匯入完畢後，更新頁面，回到最初的畫面

### 查詢頁面
- 區塊一
  1. 輸入lot_no(支援模糊搜尋)
  2. 根據搜尋到的結果，顯示P1、P2、P3分頁(不論是否有資料)
- 區塊二
  1. 根據**自定義**的表格顯示規則分成數個區塊(根據客戶需要)(區塊2.1, 2.2, 2.3 ...)




## Warning & To-do
- [X] 修改搜尋邏輯: 可以套用"符合特定輸入"的模式
- [X] 修改"生產日期"建立邏輯，p2, p3有對應欄位(民國年->西元年)，p1(YYYY-MM-DD)
- [X] 加入支援PDF檔案上傳 <- 需要確認input&output 的格式
- [X] 欄位調整
- [X] 加入 product_id 欄位在資料庫
   - [X] 需要確認是否有對應多張p1, p2表
   - [X] 需要頻繁查詢的欄位定義個別欄位，其餘使用JSONB格式儲存
- [X] 資料庫內容需要可以輸出成 Dataframe 格式(後續)
- [X] 需要確認p2, p3的關聯性(2507173_02_17 -> 17 為對應的P2 lot_no 中的 winder number)
- [ ] p1, p3 specification是否有關
- [ ] "Qaulity inspecrion"、"Qaulity control"是否需要從表?
- [X] 下拉選單內需要有"日期(指定西元年)""P3規格""機台號碼""下膠編號" => 需要都套用模糊搜尋
- [X] P3_No. 欄位已不再使用，移除必要驗證（保留在 additional_data 中以兼容舊資料）